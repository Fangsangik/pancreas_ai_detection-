# End-to-End Pipeline Inference Configuration
# Defines 5 segmentation models + 5 classification models + ensemble strategy

# 5 Segmentation Models
segmentation_models:
  - type: "unet"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/segmentation/unet/checkpoints/best.pth"
    params:
      in_channels: 1 # DICOM/NIfTI가 단일 채널(HU)일 때 1
      num_classes: 3  # [0: background, 1: pancreas, 2: tumor] 같은 구조 가정

  - type: "resunet"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/segmentation/resunet/checkpoints/best.pth"
    params:
      in_channels: 1
      num_classes: 3

  - type: "vnet"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/segmentation/vnet/checkpoints/best.pth"
    params:
      in_channels: 1
      num_classes: 3

  - type: "attention_unet"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/segmentation/attention_unet/checkpoints/best.pth"
    params:
      in_channels: 1
      num_classes: 3

  - type: "c2fnas"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/segmentation/c2fnas/checkpoints/best.pth"
    params:
      in_channels: 1
      num_classes: 3

# 5 Classification Models (one for each segmentation output)
classification_models:
  - type: "resnet3d"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/classification/resnet3d_1/checkpoints/best.pth"
    params:
      in_channels: 3
      num_classes: 2

  - type: "resnet3d"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/classification/resnet3d_2/checkpoints/best.pth"
    params:
      in_channels: 3
      num_classes: 2

  - type: "densenet3d"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/classification/densenet3d_1/checkpoints/best.pth"
    params:
      in_channels: 3
      num_classes: 2

  - type: "densenet3d"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/classification/densenet3d_2/checkpoints/best.pth"
    params:
      in_channels: 3
      num_classes: 2

  - type: "resnet3d"
    checkpoint: "/Users/hwangsang-ik/PycharmProjects/pancreas cancer detection/outputs/classification/resnet3d_3/checkpoints/best.pth"
    params:
      in_channels: 3
      num_classes: 2

# Ensemble Configuration
ensemble_method: "weighted"  # Options: average, weighted, voting, stacking
ensemble_weights: [0.25, 0.20, 0.20, 0.20, 0.15]  # Optional, must sum to 1.0
